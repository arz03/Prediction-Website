<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satta Leaderboard</title>

    <!-- Include Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <style>
        body {
            background: repeating-linear-gradient(0deg, transparent, transparent 20px, rgba(110, 6, 228, 0.5) 20px, rgba(128, 0, 128, 0.5) 40px), url('https://github.com/arz03/Prediction-Website/blob/main/api/templates/jaiyaxh-bhosdiwala.gif?raw=true') fixed center;
            background-size: cover;
            background-color: #673ab7; /* Purple Background */
            color: white;
        }

        .nav-wrapper {
            background-color: #4527a0; /* Darker shade for the nav container */
        
        }

        .nav-wrapper a.brand-logo {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 64px; /* Adjust the line-height as needed for the vertical height */
            font-size: 3rem;
        }

        .result-container {
            padding: 7px;
            max-width: 80%;
            border-radius: 30px;
            text-align: center;
            margin-bottom: 20px;
        }

        .leaderboard-container {
            max-width: 80%;
            margin: 100px auto;
            background-color: #4527a0ee; /* Darker shade for the container */
            padding: 20px;
            border-radius: 30px;
            text-align: center;
        }

        .leaderboard-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .leaderboard-name,
        .leaderboard-score,
        .leaderboard-prediction {
            flex: 1;
            margin-right: 10px;
        }

        .leaderboard-score {
            flex: 0 0 100px;
            text-align: right;
        }

        hr {
            border-top: 1px solid #9c27b0; /* Border color for lines */
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 20px;
            color: white;
        }

        .leaderboard-history-container {
            margin-top: 20px;
        }

        .leaderboard-history-header {
            font-size: 1.5rem;
        }

        .leaderboard-history-select {
            margin-top: 10px;
            margin-bottom: 20px;
        }

    </style>
</head>

<body>
    <nav class="purple darken-4">
        <div class="nav-wrapper">
            <a href="#" class="brand-logo center">Satta Winners</a>
        </div>
    </nav>

    <div class="container leaderboard-container">
        {% if revealed_answer %}
            <h5 align="left">Correct Answer (Revealed)</h5>
            <p align="left">Jaiyaxh was live at: <span id="revealed_answer">{{ revealed_answer }}</span></p>
        {% else %}
            <p >Answers are revealed once jaiyaxh is live.</p>
        {% endif %}

        {% if leaderboard %}
            <hr>
            <h2>Leaderboard</h2>
            <div class="leaderboard-row">
                <div class="leaderboard-name">Username</div>
                <div class="leaderboard-score">Accuracy</div>
                <div class="leaderboard-prediction">Prediction</div>
            </div>
            <hr>
            {% for entry in leaderboard %}
                <div class="leaderboard-row">
                    <div class="leaderboard-name">{{ entry[0] }}</div>
                    <div class="leaderboard-score">± {{ entry[1] }} minutes</div>
                    <div class="leaderboard-prediction">{{ user_predictions[entry[0]].strftime('%H:%M') }}</div>
                </div>
                <hr>
            {% endfor %}
        {% else %}  
            <p>Leaderboards are availabe below.</p>
        {% endif %}

        <div class="leaderboard-history-container">
            <h3 class="leaderboard-history-header">Leaderboard History</h3>
            <div class="input-field col s12 leaderboard-history-select">
                <select id="leaderboard-history" class="browser-default">
                    <option value="" disabled selected>Select a date</option>
                    {% for date in leaderboard_dates %}
                        <option value="{{ date }}">{{ date }}</option>
                    {% endfor %}
                </select>
            </div>

            <div id="historical-leaderboard" class="historical-leaderboard">
                <!-- Historical leaderboard data will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Include Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });

        document.getElementById('leaderboard-history').addEventListener('change', function() {
            var selectedDate = this.value;
            var historicalDataContainer = document.getElementById('historical-leaderboard');
            var leaderboardHistory = {{ leaderboard_history | tojson }};
            var userPredictions = {{ user_predictions | tojson }};

            var historicalData = leaderboardHistory[selectedDate];
            historicalDataContainer.innerHTML = '';

            if (historicalData) {
                var content = '<hr><h2>Leaderboard for ' + selectedDate + '</h2>';
                content += '<div class="leaderboard-row"><div class="leaderboard-name">Username</div><div class="leaderboard-score">Accuracy</div><div class="leaderboard-prediction">Prediction</div></div><hr>';

                historicalData.forEach(function(entry) {
                    content += '<div class="leaderboard-row"><div class="leaderboard-name">' + entry[0] + '</div><div class="leaderboard-score">± ' + entry[1] + ' minutes</div><div class="leaderboard-prediction">' + userPredictions[entry[0]] + '</div></div><hr>';
                });

                historicalDataContainer.innerHTML = content;
            }
        });
    </script>
</body>

</html>

<footer>
    <p>Made by Arjun</p>
    <a href="https://www.instagram.com/arjun__03._/">Find me on Instagram</a>
</footer>
